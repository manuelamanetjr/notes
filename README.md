CREATE TABLE VENDOR (
V_CODE INTEGER NOT NULL,
V_NAME VARCHAR(35) NOT NULL,
V_CONTACT VARCHAR(35) NOT NULL,
V_AREACODE CHAR(3) NOT NULL,
V_PHONE CHAR(8) NOT NULL,
V_STATE CHAR(2) NOT NULL,
V_ORDER CHAR(1) NOT NULL,
PRIMARY KEY (V_CODE)
);

CREATE TABLE CUSTOMER (
CUS_CODE INT PRIMARY KEY,
CUS_LNAME VARCHAR(50) NOT NULL,
CUS_FNAME VARCHAR(50) NOT NULL,
CUS_INITIAL VARCHAR(1),
CUS_AREACODE CHAR(3) DEFAULT '615' NOT NULL CHECK(CUS_AREACODE IN('615', '713' , '931')),
CUS_PHONE CHAR(8) NOT NULL,
CUS_BALANCE NUMERIC(9,2) DEFAULT 0.00,
UNIQUE (CUS_LNAME, CUS_FNAME)
);

CREATE TABLE INVOICE (
INV_NUMBER INT PRIMARY KEY,
CUS_CODE INT NOT NULL REFERENCES CUSTOMER(CUS_CODE),
INV_DATE DATE DEFAULT CURRENT_TIMESTAMP,
CONSTRAINT INV_CK1 CHECK (INV_DATE > DATE '2016-01-01')
);

CREATE TABLE PRODUCT (
P_CODE VARCHAR(10) NOT NULL,
P_DESCRIPT VARCHAR(35) NOT NULL,
P_INDATE DATE NOT NULL,
P_QQH SMALLINT NOT NULL,
P_MIN SMALLINT NOT NULL,
P_PRICE NUMERIC(8,2) NOT NULL,
P_DISCOUNT NUMERIC(5,2) NOT NULL,
V_CODE INTEGER,
PRIMARY KEY (P_CODE),
FOREIGN KEY (V_CODE) REFERENCES VENDOR ON UPDATE CASCADE
);

CREATE TABLE LINE (
INV_NUMBER INT NOT NULL,
LINE_NUMBER NUMERIC(2,0) NOT NULL,
P_CODE VARCHAR(10) NOT NULL,
LINE_UNITS NUMERIC(9,2) DEFAULT 0.0 NOT NULL,
LINE_PRICE NUMERIC(9,2) DEFAULT 0.0 NOT NULL,
PRIMARY KEY (INV_NUMBER, LINE_NUMBER),
FOREIGN KEY (INV_NUMBER) REFERENCES INVOICE ON DELETE CASCADE,
FOREIGN KEY (P_CODE) REFERENCES PRODUCT(P_CODE),
CONSTRAINT LINE_UI1 UNIQUE(INV_NUMBER, P_CODE)
);




INSERT INTO VENDOR VALUES('11125','Manuel, Inc.','Amante','215','113-3114','TN','Y');
INSERT INTO VENDOR(V_CODE, V_NAME, V_CONTACT, V_AREACODE, V_PHONE, V_STATE, V_ORDER)
VALUES('21226','Bobby, Inc.','Nalzaro','114','215-8911','FL','N');

INSERT INTO VENDOR VALUES('22125','Leo, Inc.','Lawas','215','223-3224','TN','Y');
INSERT INTO VENDOR VALUES('21231','D&E Supply','Singh','615','228-3245','TN','Y');
INSERT INTO VENDOR VALUES('21344','Gomez Bros.','Ortega','615','889-2546','KY','N');
INSERT INTO VENDOR VALUES('22567','Dome Supply','Smith','901','678-1419','GA','N');
INSERT INTO VENDOR VALUES('23119','Randsets Ltd.','Anderson','901','678-3998','GA','Y');
INSERT INTO VENDOR VALUES('24004','Brackman Bros.','Browning','615','228-1410','TN','N');
INSERT INTO VENDOR VALUES('24288','ORDVA, Inc.','Hakford','615','898-1234','TN','Y');
INSERT INTO VENDOR VALUES('25443','B&K, Inc.','Smith','904','227-0093','FL','N');
INSERT INTO VENDOR VALUES('25501','Damal Supplies','Smythe','615','890-3529','TN','N');
INSERT INTO VENDOR VALUES('25595','Rubicon Systems','Orton','904','456-0092','FL','Y');
INSERT INTO PRODUCT VALUES('11QER/31','Power painter, 15 psi., 3-nozzle','11/3/2015','8','5','109.99','0','25595');
INSERT INTO PRODUCT VALUES('13-Q2/P2','7.25-in. pwr. saw blade', '12/13/2015','32','15','14.99','0.05','21344');
INSERT INTO PRODUCT VALUES('14-Q1/L3','9.00-in. pwr. saw blade', '11/13/2015','18','12','17.49','0','21344');
INSERT INTO PRODUCT VALUES('1546-QQ2','Hrd. cloth, 1/4-in., 2x50', '1/15/2016','15','8','39.95','0','23119');
INSERT INTO PRODUCT VALUES('1558-QW1','Hrd. cloth, 1/2-in., 3x50', '1/15/2016','23','5','43.99','0','23119');
INSERT INTO PRODUCT VALUES('2232/QTY','B\&D jigsaw, 12-in. blade','12/30/2015','8','5','109.92','0.05','24288');
INSERT INTO PRODUCT VALUES('2232/QWE','B\&D jigsaw, 8-in. blade', '12/24/2015','6','5','99.87','0.05','24288');
INSERT INTO PRODUCT VALUES('2238/QPD','B\&D cordless drill, 1/2-in.','1/20/2016','12','5','38.95','0.05','25595');
INSERT INTO PRODUCT VALUES ('BRT-345','Titanium drill bit','18-Oct-15', 75, 10, 4.50, 0.06, NULL);
INSERT INTO PRODUCT VALUES('23109-HB','Claw hammer', '1/20/2016','23','10','9.95','0.1','21225');
INSERT INTO PRODUCT VALUES('23114-AA','Sledge hammer, 12 lb.', '1/2/2016','8','5','14.40','0.05',NULL);
INSERT INTO PRODUCT VALUES('54778-2T','Rat-tail file, 1/8-in. fine', '12/15/2015','43','20','4.99','0','21344');
INSERT INTO PRODUCT VALUES('89-WRE-Q','Hicut chain saw, 16 in.', '2/7/2016','11','5','256.99','0.05','24288');
INSERT INTO PRODUCT VALUES('PVC23DRT','PVC pipe, 3.5-in., 8-ft', '2/20/2016','188','75','5.87','0',NULL);
INSERT INTO PRODUCT VALUES('SMD-18277','1.25-in. metal screw, 25','3/1/2016','172','75','6.99','0','21225');
INSERT INTO PRODUCT VALUES('SW-23116','2.5-in. wd. screw, 50', '2/24/2016','237','100','8.45','0','21231');
INSERT INTO PRODUCT VALUES('WR3/TT3','Steel matting, 4''x8''x1/6", .5"mesh','1/17/2016','18','5','119.95','0.1','25595');

UPDATE PRODUCT
SET p_INDATE = '18-JAN-2016'
WHERE P_CODE = '13-Q2/P2';


DELETE FROM PRODUCT
WHERE P_CODE = 'BRT-345';


SELECT P_DESCRIPT, P_INDATE, P_PRICE, V_CODE
FROM PRODUCT
WHERE V_CODE = 21344;

SELECT P_DESCRIPT, P_QQH, P_PRICE, V_CODE
FROM PRODUCT
WHERE V_CODE <> 21344;

SELECT P_DESCRIPT, P_QQH, P_MIN, P_PRICE
FROM PRODUCT
WHERE P_PRICE <= 10;

SELECT P_CODE, P_DESCRIPT, P_QQH, P_PRICE
FROM PRODUCT
WHERE P_CODE < '1558-QW1';

SELECT P_DESCRIPT, P_QQH, P_MIN, P_PRICE, P_INDATE
FROM PRODUCT
WHERE P_INDATE >= '20-JAN-2016';

